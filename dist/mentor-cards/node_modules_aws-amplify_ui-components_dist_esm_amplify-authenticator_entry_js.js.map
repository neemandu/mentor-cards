{"version":3,"file":"node_modules_aws-amplify_ui-components_dist_esm_amplify-authenticator_entry_js.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAM2B,uBAAuB,GAAG,kmBAAhC;AAEA,MAAMC,MAAM,GAAG,IAAIvB,4DAAJ,CAAW,eAAX,CAAf;AACA,MAAMwB,oBAAoB,GAAG,MAAM;AAC/BC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB9B,IAAAA,qDAAgB,CAAC,IAAD,EAAO8B,OAAP,CAAhB;AACA;;AACA,SAAKC,gBAAL,GAAwBxB,6DAAxB;AACA;;AACA,SAAK0B,qBAAL,GAA6B,MAAM,CAAG,CAAtC;;AACA,SAAKC,SAAL,GAAiB3B,8DAAjB;AACA,SAAK6B,YAAL,GAAoB,EAApB;;AACA,SAAKC,uBAAL,GAA+B,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAiB;AAC5C,cAAQA,OAAO,CAACC,KAAhB;AACI,aAAK,iBAAL;AACA,aAAK,QAAL;AACId,UAAAA,4DAAY,CAACa,OAAO,CAACE,IAAT,EAAelB,mDAAf,CAAZ;AACA;;AACJ,aAAK,yBAAL;AACA,aAAK,oBAAL;AACA,aAAK,SAAL;AACA,aAAK,uBAAL;AACI,iBAAOA,uDAA4B,CAAC,KAAKS,gBAAN,CAAnC;AATR;AAWH,KAZD;;AAaA,SAAKU,gBAAL,GAAwB,CAAC;AAAEH,MAAAA;AAAF,KAAD,KAAiB;AACrC,cAAQA,OAAO,CAACC,KAAhB;AACI,aAAK5B,qDAAL;AACI,cAAI2B,OAAO,CAACI,OAAZ,EACI,KAAKN,YAAL,GAAoBE,OAAO,CAACI,OAA5B;AACJ;AAJR;AAMH,KAPD;AAQH;;AACKC,EAAAA,iBAAiB,GAAG;AAAA;;AAAA;AACtBnB,MAAAA,uDAAmB,CAAC,CAACU,SAAD,EAAYU,QAAZ,KAAyB;AACzC,aAAI,CAACC,iBAAL,CAAuBX,SAAvB,EAAkCU,QAAlC;;AACA,aAAI,CAACR,YAAL,GAAoB,EAApB;AACH,OAHkB,CAAnB;AAIA/B,MAAAA,yDAAA,CAAWQ,qDAAX,EAA4B,KAAI,CAAC4B,gBAAjC;AACApC,MAAAA,yDAAA,CAAWS,qDAAX,EAAyB,KAAI,CAACuB,uBAA9B;AACA7B,MAAAA,2EAAwB,CAAC,uBAAD,CAAxB;AACA,YAAMuC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqBjC,qDAArB,CAAnB;AACAgC,MAAAA,YAAY,CAACE,UAAb,CAAwBlC,qDAAxB;AACA,UAAI+B,UAAU,KAAK,MAAnB,EACI,MAAM,KAAI,CAACI,SAAL,EAAN;AAXkB;AAYzB;;AACKA,EAAAA,SAAS,GAAG;AAAA;;AAAA;AACd,UAAI,CAAC1C,oDAAD,IAAS,OAAOA,6EAAP,KAAyC,UAAtD,EAAkE;AAC9D,cAAM,IAAI4C,KAAJ,CAAUnC,qDAAV,CAAN;AACH;;AACD,aAAOT,6EAAA,GACF6C,IADE,CACGC,IAAI,IAAI;AACdjC,QAAAA,uDAA4B,CAACf,+DAAD,EAAqBgD,IAArB,CAA5B;AACH,OAHM,EAIFE,KAJE,mJAII,aAAY;AACnB,YAAIC,eAAe,GAAG,IAAtB;;AACA,YAAI;AACAA,UAAAA,eAAe,GAAGV,YAAY,CAACC,OAAb,CAAqB7B,qDAArB,CAAlB;AACH,SAFD,CAGA,OAAOuC,KAAP,EAAc;AACVhC,UAAAA,MAAM,CAACiC,KAAP,CAAa,iDAAb,EAAgED,KAAhE;AACH;;AACD,YAAI;AACA,cAAID,eAAe,KAAKnD,+DAAxB,EAA4C;AACxC,kBAAME,4DAAA,EAAN;AACH;;AACDa,UAAAA,uDAA4B,CAAC,MAAI,CAACS,gBAAN,CAA5B;AACH,SALD,CAMA,OAAO4B,KAAP,EAAc;AACVhC,UAAAA,MAAM,CAACiC,KAAP,CAAa,oBAAb,EAAmCD,KAAnC;AACH;AACJ,OArBM,EAAP;AAJc;AA0BjB;;AACKd,EAAAA,iBAAiB,CAACiB,aAAD,EAAgBtB,IAAhB,EAAsB;AAAA;;AAAA;AACzC,UAAIsB,aAAa,KAAKC,SAAtB,EACI,OAAOpC,MAAM,CAACgC,KAAP,CAAa,mCAAb,CAAP;AACJhC,MAAAA,MAAM,CAACqC,IAAP,CAAY,oDAAZ,EAAkE,MAAI,CAAC9B,SAAvE;;AACA,UAAI4B,aAAa,KAAKvD,gEAAtB,EAA2C;AACvC,cAAI,CAAC2B,SAAL,GAAiB,MAAI,CAACH,gBAAtB;AACH,OAFD,MAGK;AACD,cAAI,CAACG,SAAL,GAAiB4B,aAAjB;AACH;;AACD,YAAI,CAAClB,QAAL,GAAgBJ,IAAhB;AACA,UAAI,MAAI,CAACI,QAAT,EACIjB,MAAM,CAACuC,GAAP,CAAW,oBAAX,EAAiC,MAAI,CAACtB,QAAtC;;AACJ,UAAI,MAAI,CAACV,SAAL,KAAmB4B,aAAvB,EAAsC;AAClC,cAAI,CAAC7B,qBAAL,CAA2B,MAAI,CAACC,SAAhC,EAA2C,MAAI,CAACU,QAAhD;;AACAjB,QAAAA,MAAM,CAACqC,IAAP,CAAa,iCAAgC,MAAI,CAAC9B,SAAU,EAA5D;AACH;AAhBwC;AAiB5C;;AACDiC,EAAAA,mBAAmB,CAACjC,SAAD,EAAY;AAC3B,YAAQA,SAAR;AACI,WAAK3B,6DAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAA8BnE,qDAAC,CAAC,iBAAD,EAAoB;AAAEoE,UAAAA,SAAS,EAAE,KAAKA,SAAlB;AAA6BC,UAAAA,aAAa,EAAE,KAAKA;AAAjD,SAApB,CAA/B,CAAT;;AACJ,WAAK/D,oEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAAsCnE,qDAAC,CAAC,yBAAD,EAA4B;AAAEsD,UAAAA,IAAI,EAAE,KAAKX;AAAb,SAA5B,CAAvC,CAAT;;AACJ,WAAKrC,6DAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAA8BnE,qDAAC,CAAC,iBAAD,EAAoB;AAAEqE,UAAAA,aAAa,EAAE,KAAKA;AAAtB,SAApB,CAA/B,CAAT;;AACJ,WAAK/D,oEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAAsCnE,qDAAC,CAAC,yBAAD,EAA4B;AAAEsD,UAAAA,IAAI,EAAE,KAAKX,QAAb;AAAuB0B,UAAAA,aAAa,EAAE,KAAKA;AAA3C,SAA5B,CAAvC,CAAT;;AACJ,WAAK/D,qEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAAsCnE,qDAAC,CAAC,yBAAD,EAA4B;AAAEqE,UAAAA,aAAa,EAAE,KAAKA;AAAtB,SAA5B,CAAvC,CAAT;;AACJ,WAAK/D,oEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAA2CnE,qDAAC,CAAC,8BAAD,EAAiC;AAAEsD,UAAAA,IAAI,EAAE,KAAKX;AAAb,SAAjC,CAA5C,CAAT;;AACJ,WAAKrC,oEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAAqCnE,qDAAC,CAAC,wBAAD,EAA2B;AAAEsD,UAAAA,IAAI,EAAE,KAAKX;AAAb,SAA3B,CAAtC,CAAT;;AACJ,WAAKrC,gEAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAAiCnE,qDAAC,CAAC,oBAAD,EAAuB;AAAEsD,UAAAA,IAAI,EAAE,KAAKX;AAAb,SAAvB,CAAlC,CAAT;;AACJ,WAAKrC,8DAAL;AACI,eAAQN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,EAA8BnE,qDAAC,CAAC,KAAD,EAAQ,IAAR,EAAc,YAAd,CAA/B,CAAT;;AACJ,WAAKM,+DAAL;AACI,eAAO,CAACN,qDAAC,CAAC,MAAD,EAAS;AAAEmE,UAAAA,IAAI,EAAE;AAAR,SAAT,CAAF,EAAmCnE,qDAAC,CAAC,MAAD,EAAS,IAAT,CAApC,CAAP;;AACJ;AACI,cAAM,IAAIoD,KAAJ,CAAW,yBAAwBnB,SAAU,EAA7C,CAAN;AAtBR;AAwBH;;AACD4C,EAAAA,mBAAmB,GAAG;AAClBzE,IAAAA,yDAAA,CAAWS,qDAAX,EAAyB,KAAKuB,uBAA9B;AACAhC,IAAAA,yDAAA,CAAWQ,qDAAX,EAA4B,KAAK4B,gBAAjC;AACA,WAAOjB,mDAAP;AACH;;AACDwD,EAAAA,MAAM,GAAG;AACL,WAAQ/E,qDAAC,CAACE,iDAAD,EAAO,IAAP,EAAa,KAAKiC,YAAL,GAAqBnC,qDAAC,CAAC,eAAD,EAAkB;AAAEyC,MAAAA,OAAO,EAAE,KAAKN,YAAhB;AAA8B6C,MAAAA,WAAW,EAAE,MAAM;AACvG,aAAK7C,YAAL,GAAoB,EAApB;AACH,OAFyD;AAEvD,mBAAa;AAF0C,KAAlB,CAAtB,GAE0B,IAFvC,EAE6C,KAAKF,SAAL,KAAmB3B,+DAAnB,GAAyC,KAAK4D,mBAAL,CAAyB,KAAKjC,SAA9B,CAAzC,GAAsFjC,qDAAC,CAAC,KAAD,EAAQ;AAAEiF,MAAAA,KAAK,EAAE;AAAT,KAAR,EAAqC,KAAKf,mBAAL,CAAyB,KAAKjC,SAA9B,CAArC,CAFpI,CAAT;AAGH;;AA5H8B,CAAnC;AA8HAN,oBAAoB,CAACuD,KAArB,GAA6BzD,uBAA7B","sources":["./node_modules/@aws-amplify/ui-components/dist/esm/amplify-authenticator.entry.js"],"sourcesContent":["import { r as registerInstance, h, H as Host } from './index-39969785.js';\nimport { Logger, Hub } from '@aws-amplify/core';\nimport { A as AuthState } from './auth-types-78df304e.js';\nimport { appendToCognitoUserAgent, Auth } from '@aws-amplify/auth';\nimport './Translations-3f32c42a.js';\nimport { T as TOAST_AUTH_ERROR_EVENT, U as UI_AUTH_CHANNEL, A as AUTH_CHANNEL, R as REDIRECTED_FROM_HOSTED_UI, N as NO_AUTH_MODULE_FOUND, c as AUTHENTICATOR_AUTHSTATE } from './constants-d1abe7de.js';\nimport { d as dispatchAuthStateChangeEvent, o as onAuthUIStateChange } from './helpers-9a4b32d1.js';\nimport { c as checkContact } from './auth-helpers-d97ec2fb.js';\n\nconst amplifyAuthenticatorCss = \":host{--background-color:var(--amplify-background-color);--width:28.75rem;--min-width:20rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;--box-shadow:1px 1px 4px 0 rgba(0, 0, 0, 0.15);--border-radius:6px;--padding:35px 40px;--margin-bottom:20px;--container-height:100vh;--container-display:flex;--container-justify:center;--container-align:center}.auth-container{display:var(--container-display);-ms-flex-pack:var(--container-justify);justify-content:var(--container-justify);-ms-flex-align:var(--container-align);align-items:var(--container-align);min-height:var(--container-height)}\";\n\nconst logger = new Logger('Authenticator');\nconst AmplifyAuthenticator = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        /** Initial starting state of the Authenticator component. E.g. If `signup` is passed the default component is set to AmplifySignUp */\n        this.initialAuthState = AuthState.SignIn;\n        /** Callback for Authenticator state machine changes */\n        this.handleAuthStateChange = () => { };\n        this.authState = AuthState.Loading;\n        this.toastMessage = '';\n        this.handleExternalAuthEvent = ({ payload }) => {\n            switch (payload.event) {\n                case 'cognitoHostedUI':\n                case 'signIn':\n                    checkContact(payload.data, dispatchAuthStateChangeEvent);\n                    break;\n                case 'cognitoHostedUI_failure':\n                case 'parsingUrl_failure':\n                case 'signOut':\n                case 'customGreetingSignOut':\n                    return dispatchAuthStateChangeEvent(this.initialAuthState);\n            }\n        };\n        this.handleToastEvent = ({ payload }) => {\n            switch (payload.event) {\n                case TOAST_AUTH_ERROR_EVENT:\n                    if (payload.message)\n                        this.toastMessage = payload.message;\n                    break;\n            }\n        };\n    }\n    async componentWillLoad() {\n        onAuthUIStateChange((authState, authData) => {\n            this.onAuthStateChange(authState, authData);\n            this.toastMessage = '';\n        });\n        Hub.listen(UI_AUTH_CHANNEL, this.handleToastEvent);\n        Hub.listen(AUTH_CHANNEL, this.handleExternalAuthEvent);\n        appendToCognitoUserAgent('amplify-authenticator');\n        const byHostedUI = localStorage.getItem(REDIRECTED_FROM_HOSTED_UI);\n        localStorage.removeItem(REDIRECTED_FROM_HOSTED_UI);\n        if (byHostedUI !== 'true')\n            await this.checkUser();\n    }\n    async checkUser() {\n        if (!Auth || typeof Auth.currentAuthenticatedUser !== 'function') {\n            throw new Error(NO_AUTH_MODULE_FOUND);\n        }\n        return Auth.currentAuthenticatedUser()\n            .then(user => {\n            dispatchAuthStateChangeEvent(AuthState.SignedIn, user);\n        })\n            .catch(async () => {\n            let cachedAuthState = null;\n            try {\n                cachedAuthState = localStorage.getItem(AUTHENTICATOR_AUTHSTATE);\n            }\n            catch (error) {\n                logger.debug('Failed to get the auth state from local storage', error);\n            }\n            try {\n                if (cachedAuthState === AuthState.SignedIn) {\n                    await Auth.signOut();\n                }\n                dispatchAuthStateChangeEvent(this.initialAuthState);\n            }\n            catch (error) {\n                logger.debug('Failed to sign out', error);\n            }\n        });\n    }\n    async onAuthStateChange(nextAuthState, data) {\n        if (nextAuthState === undefined)\n            return logger.error('nextAuthState cannot be undefined');\n        logger.info('Inside onAuthStateChange Method current authState:', this.authState);\n        if (nextAuthState === AuthState.SignedOut) {\n            this.authState = this.initialAuthState;\n        }\n        else {\n            this.authState = nextAuthState;\n        }\n        this.authData = data;\n        if (this.authData)\n            logger.log('Auth Data was set:', this.authData);\n        if (this.authState === nextAuthState) {\n            this.handleAuthStateChange(this.authState, this.authData);\n            logger.info(`authState has been updated to ${this.authState}`);\n        }\n    }\n    renderAuthComponent(authState) {\n        switch (authState) {\n            case AuthState.SignIn:\n                return (h(\"slot\", { name: \"sign-in\" }, h(\"amplify-sign-in\", { federated: this.federated, usernameAlias: this.usernameAlias })));\n            case AuthState.ConfirmSignIn:\n                return (h(\"slot\", { name: \"confirm-sign-in\" }, h(\"amplify-confirm-sign-in\", { user: this.authData })));\n            case AuthState.SignUp:\n                return (h(\"slot\", { name: \"sign-up\" }, h(\"amplify-sign-up\", { usernameAlias: this.usernameAlias })));\n            case AuthState.ConfirmSignUp:\n                return (h(\"slot\", { name: \"confirm-sign-up\" }, h(\"amplify-confirm-sign-up\", { user: this.authData, usernameAlias: this.usernameAlias })));\n            case AuthState.ForgotPassword:\n                return (h(\"slot\", { name: \"forgot-password\" }, h(\"amplify-forgot-password\", { usernameAlias: this.usernameAlias })));\n            case AuthState.ResetPassword:\n                return (h(\"slot\", { name: \"require-new-password\" }, h(\"amplify-require-new-password\", { user: this.authData })));\n            case AuthState.VerifyContact:\n                return (h(\"slot\", { name: \"verify-contact\" }, h(\"amplify-verify-contact\", { user: this.authData })));\n            case AuthState.TOTPSetup:\n                return (h(\"slot\", { name: \"totp-setup\" }, h(\"amplify-totp-setup\", { user: this.authData })));\n            case AuthState.Loading:\n                return (h(\"slot\", { name: \"loading\" }, h(\"div\", null, \"Loading...\")));\n            case AuthState.SignedIn:\n                return [h(\"slot\", { name: \"greetings\" }), h(\"slot\", null)];\n            default:\n                throw new Error(`Unhandled auth state: ${authState}`);\n        }\n    }\n    componentWillUnload() {\n        Hub.remove(AUTH_CHANNEL, this.handleExternalAuthEvent);\n        Hub.remove(UI_AUTH_CHANNEL, this.handleToastEvent);\n        return onAuthUIStateChange;\n    }\n    render() {\n        return (h(Host, null, this.toastMessage ? (h(\"amplify-toast\", { message: this.toastMessage, handleClose: () => {\n                this.toastMessage = '';\n            }, \"data-test\": \"authenticator-error\" })) : null, this.authState === AuthState.SignedIn ? (this.renderAuthComponent(this.authState)) : (h(\"div\", { class: \"auth-container\" }, this.renderAuthComponent(this.authState)))));\n    }\n};\nAmplifyAuthenticator.style = amplifyAuthenticatorCss;\n\nexport { AmplifyAuthenticator as amplify_authenticator };\n"],"names":["r","registerInstance","h","H","Host","Logger","Hub","A","AuthState","appendToCognitoUserAgent","Auth","T","TOAST_AUTH_ERROR_EVENT","U","UI_AUTH_CHANNEL","AUTH_CHANNEL","R","REDIRECTED_FROM_HOSTED_UI","N","NO_AUTH_MODULE_FOUND","c","AUTHENTICATOR_AUTHSTATE","d","dispatchAuthStateChangeEvent","o","onAuthUIStateChange","checkContact","amplifyAuthenticatorCss","logger","AmplifyAuthenticator","constructor","hostRef","initialAuthState","SignIn","handleAuthStateChange","authState","Loading","toastMessage","handleExternalAuthEvent","payload","event","data","handleToastEvent","message","componentWillLoad","authData","onAuthStateChange","listen","byHostedUI","localStorage","getItem","removeItem","checkUser","currentAuthenticatedUser","Error","then","user","SignedIn","catch","cachedAuthState","error","debug","signOut","nextAuthState","undefined","info","SignedOut","log","renderAuthComponent","name","federated","usernameAlias","ConfirmSignIn","SignUp","ConfirmSignUp","ForgotPassword","ResetPassword","VerifyContact","TOTPSetup","componentWillUnload","remove","render","handleClose","class","style","amplify_authenticator"],"sourceRoot":"webpack:///"}