"use strict";
(self["webpackChunkmentor_cards"] = self["webpackChunkmentor_cards"] || []).push([["node_modules_aws-amplify_ui-components_dist_esm_amplify-select-mfa-type_entry_js"],{

/***/ 35129:
/*!*******************************************************************************************!*\
  !*** ./node_modules/@aws-amplify/ui-components/dist/esm/amplify-select-mfa-type.entry.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "amplify_select_mfa_type": () => (/* binding */ AmplifySelectMFAType)
/* harmony export */ });
/* harmony import */ var C_Users_Sampath_Music_mentor_cards_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ 19369);
/* harmony import */ var _index_39969785_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-39969785.js */ 23622);
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ 75582);
/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-amplify/core */ 35216);
/* harmony import */ var _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./auth-types-78df304e.js */ 94247);
/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/auth */ 22108);
/* harmony import */ var _Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Translations-3f32c42a.js */ 58477);
/* harmony import */ var _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./constants-d1abe7de.js */ 14481);







const logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ConsoleLogger('SelectMFAType');
const AmplifySelectMFAType = class {
  constructor(hostRef) {
    (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    /** Fires when Verify is clicked */

    this.handleSubmit = event => this.verify(event);

    this.TOTPSetup = false;
    this.selectMessage = null;
    this.MFAMethod = null;
    this.isTOTP = false;
    this.isNoMFA = false;
    this.isSMS = false;
    this.loading = false;
  }

  handleRadioButtonChange(event) {
    this.TOTPSetup = false;
    this.selectMessage = null; // Reseting state values to default

    this.isNoMFA = false;
    this.isTOTP = false;
    this.isSMS = false;
    const {
      value,
      type,
      checked
    } = event.target;
    const checkType = ['radio', 'checkbox'].includes(type);

    if (value === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.SMS && checkType) {
      this.isSMS = checked;
    }

    if (value === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.TOTP && checkType) {
      this.isTOTP = checked;
    }

    if (value === _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.NOMFA && checkType) {
      this.isNoMFA = checked;
    }
  }

  verify(event) {
    var _this = this;

    return (0,C_Users_Sampath_Music_mentor_cards_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)(function* () {
      // avoid submitting the form
      if (event) {
        event.preventDefault();
      }

      logger.debug('MFA Type Values', {
        TOTP: _this.isTOTP,
        SMS: _this.isSMS,
        'No MFA': _this.isNoMFA
      });

      if (_this.isTOTP) {
        _this.MFAMethod = _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.TOTP;
      } else if (_this.isSMS) {
        _this.MFAMethod = _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.SMS;
      } else if (_this.isNoMFA) {
        _this.MFAMethod = _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_2__.M.NOMFA;
      }

      const user = _this.authData;

      if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth || typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.setPreferredMFA !== 'function') {
        throw new Error(_constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__.N);
      }

      _this.loading = true;

      try {
        const preferredMFAData = yield _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.setPreferredMFA(user, _this.MFAMethod);
        logger.debug('Set Preferred MFA Succeeded', preferredMFAData);
        _this.selectMessage = `${_aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.SUCCESS_MFA_TYPE)} ${_this.MFAMethod}`; // 	TODO Add Toast = showToast: true,
      } catch (error) {
        const {
          message
        } = error;

        if (message === _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__.f || message === _constants_d1abe7de_js__WEBPACK_IMPORTED_MODULE_4__.g) {
          _this.TOTPSetup = true;
          _this.selectMessage = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.SETUP_TOTP_REQUIRED); // 	TODO Add Toast = showToast: true,
        } else {
          logger.debug('Set Preferred MFA failed', error);
          _this.selectMessage = _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.UNABLE_TO_SETUP_MFA_AT_THIS_TIME); // 	TODO Add Toast = showToast: true,
        }
      } finally {
        _this.loading = false;
      }
    })();
  }

  contentBuilder() {
    if (!this.MFATypes || Object.keys(this.MFATypes).length < 2) {
      logger.debug(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE));
      return (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", null, (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("a", null, _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE)));
    }

    const {
      SMS,
      TOTP,
      Optional
    } = this.MFATypes;
    return (// TODO: Add Toast messages
      (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("amplify-form-section", {
        submitButtonText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.SELECT_MFA_TYPE_SUBMIT_BUTTON_TEXT),
        headerText: _aws_amplify_core__WEBPACK_IMPORTED_MODULE_7__.I18n.get(_Translations_3f32c42a_js__WEBPACK_IMPORTED_MODULE_3__.T.SELECT_MFA_TYPE_HEADER_TEXT),
        handleSubmit: event => this.handleSubmit(event),
        loading: this.loading
      }, SMS ? (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("amplify-radio-button", {
        key: "sms",
        name: "MFAType",
        value: "SMS",
        label: "SMS",
        handleInputChange: event => this.handleRadioButtonChange(event)
      }) : null, TOTP ? (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("amplify-radio-button", {
        key: "totp",
        name: "MFAType",
        value: "TOTP",
        label: "TOTP",
        handleInputChange: event => this.handleRadioButtonChange(event)
      }) : null, Optional ? (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("amplify-radio-button", {
        key: "noMFA",
        name: "MFAType",
        value: "NOMFA",
        label: "No MFA",
        handleInputChange: event => this.handleRadioButtonChange(event)
      }) : null)
    );
  }

  render() {
    return (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("div", null, this.contentBuilder(), this.TOTPSetup ? (0,_index_39969785_js__WEBPACK_IMPORTED_MODULE_1__.h)("amplify-totp-setup", {
      user: this.authData
    }) : null);
  }

};


/***/ })

}]);
//# sourceMappingURL=node_modules_aws-amplify_ui-components_dist_esm_amplify-select-mfa-type_entry_js.js.map