<div style="position: relative;">
  <button class="iconButton" mat-icon-button (click)="closeDialog()">
    <mat-icon>highlight_off</mat-icon>
  </button>
  <mat-horizontal-stepper [linear]="isLinear" #stepper label="כמה תהיו?" (selectionChange)="stepChanged($event)">
    <mat-step class="step" state="done" label="כמה תהיו?">
      <mat-button-toggle-group [(ngModel)]="numOfUsersSelected" name="amountOfPeople"
        (change)="changePack();fixParameters();">
        <mat-button-toggle *ngFor="let userAmount of configAmountsOfUsers" [value]="userAmount"
          matTooltip="{{getProgramJsonDescription(userAmount)}}" [matTooltipClass]="{'tooltip-class' : true}">
          <p>
            {{getAmountOfUsersDesc(userAmount)}}
          </p>
          <p style="font-size: medium;">
            {{getDiscountAmount(userAmount)}}
          </p>
        </mat-button-toggle>
      </mat-button-toggle-group>
      <div id="extraProgramData" *ngIf="programJsonExtra !== ''">
        <p>דגשים לתוכנית:</p>
        <p class="instruction">{{programJsonExtra}}</p>
        <p class="instruction">תמיד אפשר להתחיל בעצמכם ובהמשך לשדרג תכנית</p>
      </div>
      <div>
        <button mat-button matStepperNext>הבא
          <mat-icon>navigate_before</mat-icon>
        </button><br>
      </div>
    </mat-step>
    <mat-step state="done" label="בכמה ערכות תשתמשו?">
      <mat-button-toggle-group [(ngModel)]="packSelected" name="amountOfPacks" (change)="fixParameters();">
        <mat-button-toggle #toggle *ngFor="let plan of getPlans()" [value]="plan">
          <p>
            {{getNumOfPacksDesc(plan.numberOfCardPacks)}}
          </p>
          <p id="original_price" *ngIf="plan.discount != 0">
            <s>{{plan.price}} ש"ח</s>
          </p>
          <p id="real_price">
            {{(plan.price - plan.discount).toFixed(2)}} ש"ח
          </p>
          <p style="font-size: medium;">
            לחודש
          </p>
          <!-- </div> -->
        </mat-button-toggle>
      </mat-button-toggle-group>
      <div id="extraProgramData">
        <p>בתקופת הניסיון, כל הערכות פתוחות לשימושכם!</p>
        <p>לא אהבתם ערכה מסוימת? לא נורא! כל חודש אתם יכולים להחליף ערכה!</p>
      </div>
      <div>
        <button mat-button matStepperPrevious>
          <mat-icon>navigate_next</mat-icon>הקודם
        </button>
        <button mat-button matStepperNext>הבא<mat-icon>navigate_before</mat-icon></button>
      </div>
    </mat-step>
    <mat-step state="done" label="אז מה סיכמנו?">
      <p>כמות משתמשים: {{numOfUsersSelected}}</p>
      <p>כמות ערכות בחודש: {{packSelected.numberOfCardPacks == -1 ? 'ללא הגבלה' : packSelected.numberOfCardPacks}}</p>
      <p *ngIf="packSelected.discount !== 0">מחיר לפני הנחה: {{packSelected.price.toFixed(2)}} ש"ח</p>
      <p id="real_price">מחיר סופי לחבילה זו: {{(packSelected.price - packSelected.discount).toFixed(2)}} ש"ח</p>
      <p id="reminder" style="margin-top: 1rem;font-size: revert;">30 ימי ניסיון חינם. בטלו בכל עת.</p>
      <p style="font-size: 1rem;">למעבר לתשלום באמצעות PayPal או אשראי לחצו על הכפתור</p>
      <div id="paypal" [hidden]="changedPlansThisMonth || ownsCurrentPlanLabel"
        style="width: 70%;" #paypal></div>
      <p id="cantChangePlanLabel" *ngIf="changedPlansThisMonth">
        <mat-icon [inline]=true>block</mat-icon>אין להחליף חבילה יותר מפעם בחודש
      </p>
      <p id="ownsCurrentPlanLabel" *ngIf="ownsCurrentPlanLabel">
        <mat-icon [inline]=true>done</mat-icon>את\ה רשום לחבילה זו כבר
      </p>
      <button mat-button matStepperPrevious>
        <mat-icon>navigate_next</mat-icon>הקודם
      </button>
    </mat-step>
  </mat-horizontal-stepper>
</div>