<title>{{ "pages.packContent.title" | translate }}</title>
<div class="d-flex flex-column">
  <!-- <div class="title d-flex justify-content-center align-items-baseline">
    <h1 style="text-align: center" *ngIf="pack">{{ pack.name }}</h1>
    <h1 style="text-align: center" *ngIf="!id">
      {{ "pages.packContent.defaultName" | translate }}
    </h1>
    <h2
      *ngIf="pack?.about && !unauthorized"
      id="about-author"
      class="clickable"
      (click)="openAboutDialog()"
    >
      {{ "pages.packContent.aboutAuthor" | translate }}
    </h2>
  </div>
  <button
    *ngIf="!unauthorized && !commonLink"
    id="guideBook"
    type="button"
    [disabled]="showEditPack"
    [ngClass]="{
      'guide-btn': true,
      'top-option-btn': !showEditPack,
      'top-option-btn-disabled': showEditPack
    }"
    (click)="openGuideBook()"
  >
    <mat-icon
      id="guide-book-icon"
      class="guide-icon"
      style="font-family: 'Material Icons'"
      >local_library</mat-icon
    >
    {{ "pages.packContent.guideBook" | translate }}
  </button>
</div>
<br />
<div
  *ngIf="isLoaded && unauthorized"
  class="d-flex justify-content-center"
  style="font-size: larger"
>
  {{ "pages.packContent.unauthorized" | translate }}
</div>

<div
  *ngIf="isLoaded && commonLink && cards.length == 0"
  class="d-flex justify-content-center"
  style="font-size: larger"
>
  {{ "pages.packContent.linkexpired" | translate }}
</div>

<div
  *ngIf="!unauthorized && cards.length > 0"
  class="sticky-top d-flex justify-content-center"
>
  <div id="actions">
    <button
      id="multipleChoise"
      type="button"
      [ngClass]="{
        'option-btn': true,
        'top-option-btn': !showEditPack,
        'top-option-btn-disabled': showEditPack
      }"
      (click)="multipileChanged()"
      [disabled]="showEditPack"
    >
      {{
        multipileChecked
          ? ("pages.packContent.actions.multipleChoice.showSingle" | translate)
          : ("pages.packContent.actions.multipleChoice.showMultiple"
            | translate)
      }}
    </button>
    <button
      id="mixCards"
      type="button"
      [disabled]="showEditPack"
      [ngClass]="{
        'option-btn': true,
        'top-option-btn': !showEditPack,
        'top-option-btn-disabled': showEditPack
      }"
      (click)="shuffle()"
    >
      {{ "pages.packContent.actions.mixCards" | translate }}
    </button>
    <button
      id="flipCards"
      type="button"
      [disabled]="showEditPack"
      [ngClass]="{
        'option-btn': true,
        'top-option-btn': !showEditPack,
        'top-option-btn-disabled': showEditPack
      }"
      (click)="flip()"
    >
      {{ "pages.packContent.actions.flipCards" | translate }}
    </button>
    <button
      id="randomCard"
      type="button"
      [disabled]="showEditPack"
      [ngClass]="{
        'option-btn': true,
        'top-option-btn': !showEditPack,
        'top-option-btn-disabled': showEditPack
      }"
      (click)="toggleRandomCardsModal()"
    >
      {{ "pages.packContent.actions.randomCard" | translate }}
    </button>
    <button
      id="editPack"
      type="button"
      *ngIf="!commonLink"
      [ngClass]="{ 'option-btn top-option-btn': true }"
      (click)="editPack()"
    >
      {{
        showEditPack
          ? ("pages.packContent.actions.editPack.endEdit" | translate)
          : ("pages.packContent.actions.editPack.edit" | translate)
      }}
    </button>
  </div>
  <button
    type="button"
    id="menu-actions"
    class="btn option-btn"
    [matMenuTriggerFor]="actions"
  >
    <mat-icon>list</mat-icon>
    <span> {{ "pages.packContent.actions.menuActions" | translate }}</span>
  </button>
</div>
<div *ngIf="!commonLink" class="right-side-container">
  <br />
  <button
    mat-button
    (click)="createCommomLink()"
    class="link-button"
    matTooltip="שתפו את הקישור והזמינו לעבודה אינטראקטיבית"
  >
    <mat-icon>share</mat-icon>
    צור קישור לעבודה משותפת
  </button>
</div> -->
  <div>
    <div
      class="bg-[#ffe0d8] w-full py-6 ps-10 padding-zero"
      [dir]="langDirectionService.currentLangDirection"
    >
      <div class="grid-display">
        <div class="flex justify-start padding-20 background-white">
          <div class="relative">
            <img
              *ngIf="pack?.imgUrl"
              [src]="pack.imgUrl"
              alt="Pack image"
              width="100"
              height=""
              class="rounded-sm mb-2"
            />
            <div class="absolute z-8 text-center bottom-2 left-4">
              <img
                src="/assets/New/pack-view/heart-icon.svg"
                alt=""
                width="25"
                height="25"
                class=""
              />
              <div class="text-white text-center">{{ pack.likesCounter }}</div>
            </div>
            <div class="absolute z-8 text-center bottom-2 right-4">
              <img
                src="/assets/New/pack-view/card-icon.png"
                alt=""
                width="30"
                height="30"
                class=""
              />
              <div class="text-white text-center">{{ pack.cards.length }}</div>
            </div>
          </div>
          <div class="ms-4">
            <h2 class="font-bold mb-0 text-start" *ngIf="pack">
              {{ pack.name }}
            </h2>
            <h2 class="font-bold mb-0 text-start" *ngIf="!id">
              {{ "pages.packContent.defaultName" | translate }}
            </h2>
            <h3 class="font-bold mb-0 text-start">{{ pack.ownerName }}</h3>

            <div class="flex gap-4 c-gap">
              <div class="justify-center flex flex-col items-center">
                <button
                  class="w-10 h-8 flex items-center justify-center py-2"
                  (click)="openGuideBook()"
                >
                  <img
                    src="/assets/New/pack-view/book-icon.svg"
                    alt=""
                    width="25"
                    height="25"
                  />
                </button>
                <button (click)="openGuideBook()">
                  <div class="text-size-10">ספר הדרכה</div>
                </button>
              </div>

              <div
                class="justify-center flex flex-col items-center"
                *ngIf="pack.videoUrl"
              >
                <button class="w-10 h-8 flex items-center justify-center py-2">
                  <img
                    src="/assets/New/pack-view/play-icon.svg"
                    alt=""
                    width="25"
                    height="25"
                  />
                </button>
                <div class="text-size-10">הדרכה</div>
              </div>

              <div
                class="justify-center flex flex-col items-center"
                *ngIf="pack?.about && !unauthorized"
              >
                <button
                  class="w-10 h-8 flex items-center justify-center py-2"
                  (click)="openAboutDialog()"
                >
                  <img
                    src="/assets/New/pack-view/speak-icon.svg"
                    alt=""
                    width="25"
                    height="25"
                  />
                </button>
                <button (click)="openAboutDialog()">
                  <div class="text-size-10">היוצר</div>
                </button>
              </div>

              <div
                class="justify-center flex flex-col items-center"
                *ngIf="pack.isHardCopyAvailable && !unauthorized"
              >
                <button
                  class="w-10 h-8 flex items-center justify-center py-2"
                  (click)="redirect()"
                >
                  <img
                    src="/assets/New/pack-view/cart-icon.png"
                    alt=""
                    width="30"
                    height="30"
                  />
                </button>
                <button (click)="redirect()">
                  <div class="text-size-10">קנו ערכה</div>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Zoom Control Button -->

        <div class="hideItDesktop">
          <div class="zoom-controls">
            <button class="zoom-button">
              <div class="icon-container">
                <mat-icon class="zoom-icon" (click)="zoomIn()">add</mat-icon>
                <div class="divider"></div>
                <mat-icon class="zoom-icon" (click)="zoomOut()"
                  >remove</mat-icon
                >
              </div>
            </button>
          </div>
        </div>

        <div class="mobile-bg">
          <div class="zoom-control hideItMobile">
            <button class="zoom-btn" (click)="zoomOut()">
              <div class="icon-container">
                <img src="../../../assets/icons/zoomOut.png" />
              </div>
            </button>

            <button class="zoom-btn" (click)="zoomIn()">
              <div class="icon-container">
                <img src="../../../assets/icons/zoomIn.png" />
              </div>
            </button>
          </div>

          <div class="flex justify-center mb-2">
            <!-- <button class="border-b-2 border-[#e98980] text-start flex gap-2 items-center"
            (click)="openDialog()"
            >
              open dialog
              <img src="/assets/New/pack-view/down-icon.png" alt="">
            </button> -->
            <!-- {{pack.topQuestions[0]}} -->
          </div>
          <top-questions-dialog
            [isOpen]="isDialogOpen"
            (closeDialog)="closeDialog()"
          ></top-questions-dialog>

           <!-- isReadingGuidebookAMust  -->
          <div *ngIf="pack?.isReadingGuidebookAMust" class="dropdown section-drop-down text-red d-flex justify-center">
              <p>מומלץ לקרוא את ספר ההדרכה טרם תחילת עבודה עם ערכה זו</p>
          </div>
           
          <!-- Drop-down  -->
          <div class="dropdown section-drop-down">
            <div
              class="dropdown-select position-relative"
              (click)="toggleDropdown()"
            >
              <span class="selected-option text-xl">{{ selectedOption }}</span>
              <span class="dropdown-icon">▼</span>
            </div>
            <div class="dropdown-options" [class.show]="isDropdownOpen">
              <div
                [contentEditable]="isEditing && isEditingOption === index"
                class="dropdown-option"
                *ngFor="let option of options; let index = index"
                (click)="selectOption(option, index)"
                (keydown.enter)="saveEdit(option, index)"
                (blur)="saveEdit(option, index)"
              >
                <img
                  *ngIf="option.icon"
                  [src]="option.icon"
                  alt="icon"
                  width="25"
                  height="25"
                />
                {{ isEditing && isEditingOption === index ? "" : option.text }}
              </div>
            </div>
          </div>

          <div class="section-drop-down background-white py-2">
            <div class="flex ms-3 gap-2 justify-center">
              <button
                class="justify-center flex flex-col items-center border-2 border-[#e67c73] w-28 btn-1 btn-height-35 rounded-full"
                id="flipCards"
                type="button"
                [disabled]="showEditPack"
                (click)="flip()"
                matTooltip="הקלפים יתהפכו מצד אחד לצד שני"
              >
                <div
                  class="w-10 h-8 flex items-center justify-center py-2 padding-none"
                >
                  <img
                    src="/assets/New/pack-view/rotate-icon.svg"
                    alt=""
                    width="40"
                    height="40"
                    class="img-shuffle"
                  />
                </div>
                <div class="text-xs mb-1 text-xxs">הפוך קלפים</div>
              </button>
              <button
                class="justify-center flex flex-col items-center border-2 border-[#e67c73] w-28 btn-2 btn-height-35 rounded-full"
                id="randomCard"
                type="button"
                [disabled]="showEditPack"
                (click)="toggleRandomCardsModal()"
                matTooltip="שליפה אקראית של קלף מהערכה"
              >
                <div
                  class="w-10 h-8 flex items-center justify-center py-2 padding-none"
                >
                  <img
                    src="/assets/New/pack-view/info-icon.svg"
                    alt=""
                    width="15"
                    height="15"
                    class="img-info"
                  />
                </div>
                <div class="text-xs mb-1 text-xxs">קלף אקראי</div>
              </button>
              <button
                class="justify-center flex flex-col items-center border-2 border-[#e67c73] w-32 btn-1 btn-height-35 rounded-full"
                (click)="createCommomLink()"
                matTooltip="הזמנת משתתפים נוספים לערכה"
              >
                <div
                  class="w-10 h-8 flex items-center justify-center py-2 padding-none"
                >
                  <img
                    src="/assets/New/pack-view/link-icon.svg"
                    alt=""
                    width="50"
                    height="50"
                    class="img-link"
                  />
                </div>
                <div class="text-xs mb-1 text-xxs">עבודה משותפת</div>
              </button>
              <button
                class="justify-center flex flex-col items-center border-2 border-[#e67c73] w-20 btn-4 btn-height-35 rounded-full"
                id="mixCards"
                type="button"
                [disabled]="showEditPack"
                (click)="shuffle()"
                matTooltip="שינוי סדר הקלפים"
              >
                <div
                  class="w-10 h-8 flex items-center justify-center py-2 padding-none"
                >
                  <img
                    src="/assets/New/pack-view/shuffle-icon.svg"
                    alt=""
                    width="25"
                    height="25"
                    class="img-hand"
                  />
                </div>
                <div class="text-xs mb-1 text-xxs">ערבב</div>
              </button>
              <button
                class="justify-center flex flex-col items-center border-2 border-[#e67c73] w-28 btn-1 btn-height-35 rounded-full"
                id="editPack"
                type="button"
                *ngIf="!commonLink"
                (click)="editPack()"
                matTooltip="הסרת קלפים ספציפיים מהערכה רק לסשן הנוכחי."
              >
                <div
                  class="!w-12 h-8 flex items-center justify-center py-2 padding-none"
                >
                  <img
                    src="/assets/New/pack-view/pen-icon.svg"
                    alt=""
                    width="25"
                    height="25"
                    class="img-pen"
                  />
                </div>
                <div class="mb-1 text-xs">עריכת הערכה</div>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      *ngif="pack.isReadingGuidebookAMust"
      class="bg-red-600 h-10 w-full text-center text-white items-center sm:text-xl"
    >
      מומלץ לקרוא את ספר ההדרכה טרם תחילת עבודה עם ערכה
    </div>
  </div>

  <div [class.aside-container]="pack?.cards?.length > 1">
    <aside class="aside-bar" *ngIf="pack?.cards?.length > 1">
      <ul>
        <h1 style="font-size: 15px" class="m-0">עבודה תהליכית / לפי נושאים</h1>
        <p style="font-size: 25px" class="m-0">
          בחרו את הנושאים אותם תרצו להציג או להסתיר
        </p>
        <button
          class="aside-button mb-1"
          style="background-color: #7986cb"
          (click)="showAll()"
        >
          הצגת כל הקלפים
        </button>
        <button
          *ngFor="let categories of categoriesCard"
          class="aside-button mb-1"
          [ngClass]="{
            'selected-category':
              selectedCategory?.categoryName === categories.categoryName
          }"
          (click)="selectCategory(categories)"
        >
          {{ categories.categoryName }}
        </button>
      </ul>
    </aside>

    <div *ngIf="pack?.cards?.length > 1">
      <div
        class="category-row mb-2 d-flex flex-column"
        *ngFor="let category of getFilteredCategories(); let i = index"
      >
        <div class="category-container">
          <p class="position-relative category-name">
            {{ category.categoryName }}
            <span
              *ngIf="!categoryOpenStates[i]"
              class="position-absolute left-to-category"
              (click)="toggle(i, true)"
            >
              <img src="./../../../assets/icons/icondropopen.png" alt="" />
            </span>
            <span
              *ngIf="categoryOpenStates[i]"
              class="position-absolute left-to-category"
              (click)="toggle(i, false)"
            >
              <img src="./../../../assets/icons/icondropclose.png" alt="" />
            </span>
          </p>
        </div>

        <div
          class="d-flex overflow-cards"
          *ngIf="categoryOpenStates[i]"
          [ngStyle]="!flipped ? { height: imageHeight + 'px' } : {}"
        >
          <app-card
            [ngStyle]="
              !flipped
                ? { width: imageWidth + 'px', height: imageHeight + 'px' }
                : {}
            "
            [imageWidth]="imageWidth"
            [imageHeight]="imageHeight"
            [flippedCardwidth]="flippedCardwidth"
            [flipBoxInnerInCat]="true"
            [class.scrollableCard]="id == 90"
            *ngFor="let card of category.cardsImages; let i = index"
            [ngClass]="{ clickable: true }"
            [cardContent]="card"
            [mobileView]="true"
            [selected]="selectedCards.includes(card)"
            [index]="i + 1"
            [flipped]="
              flipped || (!multipileChecked && selectedCards.includes(card))
            "
            (click)="cardSelected(card, i + 1, false, category.categoryName)"
          >
            <!-- TODO -->
          </app-card>
        </div>
      </div>
    </div>
  </div>

  <ng-container *ngIf="id != 90">
    <div class="d-flex flex-column align-items-center cards-container">
      <div
        *ngIf="pack && !showEditPack"
        [transition-group]="'flip-list'"
        class="d-flex flex-row justify-content-center flex-wrap"
      >
        <div
          *ngFor="let card of cardImages; let i = index"
          [ngClass]="{
            'd-flex flex-column align-items-center shuffle': true,
            'shuffle-item': !showEditPack
          }"
          transition-group-item
        >
          <app-card
            [ngStyle]="
              !flipped
                ? { width: cardWidth + 'rem', height: cardHeight + 'rem' }
                : {}
            "
            [imageWidth]="imageWidth"
            [imageHeight]="imageHeight"
            [flippedCardwidth]="flippedCardwidth"
            [class.card-width]="!flipped"
            [ngClass]="{ clickable: true }"
            [cardContent]="card"
            [selected]="selectedCards.includes(card)"
            [index]="i + 1"
            [flipped]="
              flipped || (!multipileChecked && selectedCards.includes(card))
            "
            (click)="cardSelected(card, i + 1)"
          >
          </app-card>
        </div>
      </div>

      <div id="image-grid" class="image-grid">
        <!-- Images will be dynamically inserted here -->
      </div>

      <div
        *ngIf="pack && showEditPack"
        class="d-flex flex-row justify-content-center flex-wrap"
      >
        <div
          *ngFor="let card of cardImages; let i = index"
          [ngClass]="{ 'd-flex flex-column align-items-center': true }"
        >
          <button
            *ngIf="showEditPack"
            mat-icon-button
            class="remove-btn"
            (click)="removeCard(i)"
          >
            <mat-icon class="remove-icon">visibility_off</mat-icon>
          </button>
          <app-card
            [ngStyle]="
              !flipped
                ? { width: cardWidth + 'rem', height: cardHeight + 'rem' }
                : {}
            "
            [imageWidth]="imageWidth"
            [imageHeight]="imageHeight"
            [flippedCardwidth]="flippedCardwidth"
            [class.card-width]="flipped"
            [ngClass]="{ clickable: true }"
            [cardContent]="card"
            [selected]="selectedCards.includes(card)"
            [index]="i + 1"
            [flipped]="
              flipped || (!multipileChecked && selectedCards.includes(card))
            "
            (click)="cardSelected(card, i + 1)"
          >
          </app-card>
        </div>
      </div>

      <div id="introduction" *ngIf="!id">
        <p
          style="
            text-align: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
          "
        >
          {{ "pages.packContent.actions.introduction.attention" | translate }}
          <span style="color: coral">&#10084;</span>
        </p>
        <ul>
          <li>
            <span>
              {{
                "pages.packContent.actions.introduction.list.dozensOfPacks"
                  | translate
              }}</span
            >
          </li>
          <li>
            <span>{{
              "pages.packContent.actions.introduction.list.over40Cards"
                | translate
            }}</span>
          </li>
          <li>
            <span>{{
              "pages.packContent.actions.introduction.list.guideBook"
                | translate
            }}</span>
          </li>
          <li>
            <span>{{
              "pages.packContent.actions.introduction.list.trialPeriod"
                | translate
            }}</span>
          </li>
        </ul>
        <div class="line"></div>
        <div id="actions" class="d-flex flex-column align-items-center">
          <span id="middle" *ngIf="!userData">{{
            "pages.packContent.actions.introduction.actions.register"
              | translate
          }}</span>
          <span id="middle" *ngIf="userData && userData.status === 'NOPLAN'">
            {{
              "pages.packContent.actions.introduction.actions.notRegistered"
                | translate
            }}</span
          >
          <span id="middle" *ngIf="userData && userData.status === 'PLAN'">{{
            "pages.packContent.actions.introduction.actions.alreadyRegistered"
              | translate
          }}</span>
          <br />
          <button
            class="action-button"
            *ngIf="!userData"
            type="button"
            (click)="signInSignUp()"
          >
            {{
              "pages.packContent.actions.introduction.actions.loginRegisterBtn"
                | translate
            }}
          </button>
          <button
            class="action-button"
            *ngIf="userData && userData.status === 'NOPLAN'"
            type="button"
            (click)="navigate('/price-page')"
          >
            {{
              "pages.packContent.actions.introduction.actions.registerPlanBtn"
                | translate
            }}
          </button>
          <button
            class="action-button"
            *ngIf="userData && userData.status === 'PLAN'"
            type="button"
            (click)="navigate('/all-packs-page')"
          >
            {{
              "pages.packContent.actions.introduction.actions.allPacksBtn"
                | translate
            }}
          </button>
        </div>
      </div>
    </div>
  </ng-container>

  <nav
    *ngIf="pack && multipileChecked"
    [ngClass]="{
      'nav navbar-light bottom-nav': true,
      'bottom-nav-hidden': !multipileChecked
    }"
  >
    <div class="nav-buttons">
      <button
        type="button"
        [ngClass]="{ 'option-btn bottom-option-btn': true }"
        [disabled]="selectedCards.length == 0"
        (click)="toggleChosenCardsModal()"
      >
        {{ "pages.packContent.nav.showChosenCards" | translate }}
      </button>
      <button
        type="button"
        [ngClass]="{ 'option-btn bottom-option-btn': true }"
        (click)="selectedCards = []"
        [disabled]="selectedCards.length == 0"
      >
        {{ "pages.packContent.nav.resetChoice" | translate }}
      </button>
    </div>
    <div id="amountChosen">
      <p>
        {{ selectedCards.length }}/5
        {{ "pages.packContent.nav.cardsChosen" | translate }}
      </p>
    </div>
  </nav>

  <nav
    *ngIf="pack && showEditPack"
    [ngClass]="{
      'nav navbar-light bottom-nav bottom-nav-edit': true,
      'bottom-nav-hidden': !showEditPack
    }"
  >
    <div class="nav-buttons">
      <button
        type="button"
        [ngClass]="{ 'option-btn bottom-option-btn': true }"
        (click)="resetEditPack()"
      >
        {{ "pages.packContent.nav.resetPack" | translate }}
      </button>
      <button
        type="button"
        [ngClass]="{ 'option-btn bottom-option-btn': true }"
        (click)="editPack()"
      >
        {{ "pages.packContent.nav.endEditing" | translate }}
      </button>
    </div>
    <div id="amountChosen">
      <p style="font-weight: bold">
        {{ "pages.packContent.nav.hideCardBeforeIcon" | translate }}
        <mat-icon class="remove-icon">visibility_off</mat-icon>
        {{ "pages.packContent.nav.hideCardAfterIcon" | translate }}
      </p>
    </div>
  </nav>

  <mat-menu #actions="matMenu">
    <button
      mat-menu-item
      type="button"
      class="option-menu-btn top-option-btn"
      (click)="multipileChanged()"
    >
      {{
        multipileChecked
          ? ("pages.packContent.matMenu.toggleCardDisplayModeButton.false"
            | translate)
          : ("pages.packContent.matMenu.toggleCardDisplayModeButton.true"
            | translate)
      }}

      <mat-icon
        *ngIf="multipileChecked"
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >photo_icon</mat-icon
      >
      <mat-icon
        *ngIf="!multipileChecked"
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >burst_mode_icon</mat-icon
      >
    </button>
    <button
      mat-menu-item
      type="button"
      class="option-menu-btn top-option-btn"
      (click)="shuffle()"
    >
      {{ "pages.packContent.matMenu.shuffleCardsButton" | translate }}
      <mat-icon
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >style_icon</mat-icon
      >
    </button>

    <button
      mat-menu-item
      type="button"
      class="option-menu-btn top-option-btn"
      (click)="flipped = !flipped; selectedCards = []"
    >
      {{ "pages.packContent.matMenu.flipDeckButton" | translate }}
      <mat-icon
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >flip_camera_android_icon</mat-icon
      >
    </button>
    <button
      mat-menu-item
      type="button"
      class="option-menu-btn top-option-btn"
      (click)="toggleRandomCardsModal()"
    >
      {{ "pages.packContent.matMenu.showRandomCardButton" | translate }}
      <mat-icon
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >shuffle_icon</mat-icon
      >
    </button>
    <button
      mat-menu-item
      type="button"
      class="option-menu-btn top-option-btn"
      (click)="editPack()"
    >
      {{
        showEditPack
          ? ("pages.packContent.matMenu.editPackButton.false" | translate)
          : ("pages.packContent.matMenu.editPackButton.true" | translate)
      }}

      <mat-icon
        id="guide-book-icon"
        style="color: #e69900; font-family: 'Material Icons'"
        >edit_icon</mat-icon
      >
    </button>
  </mat-menu>

  <div
    *ngIf="showSelectedCards"
    class="selected-cards-modal"
    (click)="toggleChosenCardsModal()"
  >
    <div
      class="selected-cards-modal-content position-relative"
      (click)="$event.stopPropagation()"
    >
      <div
        style="height: 100%"
        [ngClass]="{
          'selected-content': true,
          'selected-content-one-card': selectedCards.length == 1
        }"
      >
        <ng-container *ngIf="isDoubleSided">
          <div
            *ngIf="selectedCards.length > 1 || categoryBaseArray.length >= 1"
            style="display: flex; justify-content: flex-end"
            class="Cross-icon"
          >
            <button class="btn-close" (click)="toggleChosenCardsModal()">
              <img
                src="../../../assets/icons/Close_round.svg"
                alt="Expand data"
                width="20px"
                style="height: 40px; width: 40px"
              />
            </button>
          </div>

          <div
            class="dialog-container"
            [class.category-base-dialog]="!categoryScreen"
          >
            <div *ngIf="!categoryScreen">
              <div
                *ngFor="let card of selectedCards"
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  width: 50vw;
                "
              >
                <div>
                  <P style="color: white">{{ selectedOption }}</P>
                </div>
                <div
                  class="right-90 d-flex justify-center w-100 align-items-center"
                >
                  <button (click)="toggleFlipped(card)">
                    <img
                      src="../../../assets/icons/flipDoubleSideImg.png "
                      alt="Expand data"
                      width="20px"
                      class="flipDoubleSideIcon"
                    />
                  </button>
                  <div
                    class="d-flex justify-center align-items-center"
                    style="width: 60%"
                  >
                    <span class="bg-white rounded-full p-1 text-center w-6 h-6">
                      {{ card.index }}
                    </span>
                  </div>

                  <button
                    class="d-flex justify-end"
                    (click)="rotateCard(card)"
                    style="justify-content: flex-start"
                  >
                    <img
                      src="../../../assets/icons/right-90.svg"
                      alt="Expand data"
                      width="20px"
                      style="height: 40px; width: 40px"
                    />
                  </button>
                </div>

                <div *ngIf="selectedCards.length == 1" class="Cross-icon">
                  <button class="btn-close" (click)="toggleChosenCardsModal()">
                    <img
                      src="../../../assets/icons/Close_round.svg"
                      alt="Expand data"
                      width="20px"
                      style="height: 40px; width: 40px"
                    />
                  </button>
                </div>
                <div class="width-50vw">
                  <div class="d-flex flex-column" *ngIf="card.isPortrait">
                    <div
                      *ngIf="!flipped"
                      [ngClass]="{
                        'flip-box-inner': true,
                        flip: !card.flipped
                      }"
                    >
                      <div class="flip-box-front">
                        <img
                          alt="Mentor-cards unique cards design for the back of the card"
                          src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                          data-src="{{
                            card.frontImgUrl || card.card.frontImgUrl
                          }}"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards': selectedCards.length == 1,
                            'two-cards': selectedCards.length == 2,
                            'three-cards': selectedCards.length == 3,
                            'four-cards': selectedCards.length == 4,
                            'five-cards': selectedCards.length == 5,
                            'rotated-one-cards':
                              selectedCards.length == 1 && card.rotation !== 0,
                            'rotated-two-cards':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                      <div class="flip-box-back">
                        <img
                          loading="eager"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards': selectedCards.length == 1,
                            'two-cards':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          src="{{ card.backImgUrl || card.card.backImgUrl }}"
                          data-src="{{
                            card.backImgUrl || card.card.backImgUrl
                          }}"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                    </div>
                    <div
                      *ngIf="flipped"
                      [ngClass]="{
                        'flip-box-inner': true,
                        flip: !card.flipped
                      }"
                    >
                      <div class="flip-box-front">
                        <img
                          alt="Mentor-cards unique cards design for the back of the card"
                          src="{{ card.backImgUrl || card.card.backImgUrl }}"
                          data-src="{{
                            card.backImgUrl || card.card.backImgUrl
                          }}"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards': selectedCards.length == 1,
                            'two-cards':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                      <div class="flip-box-back">
                        <img
                          loading="eager"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards': selectedCards.length == 1,
                            'two-cards':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                          data-src="{{
                            card.frontImgUrl || card.card.frontImgUrl
                          }}"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                    </div>
                  </div>

                  <div class="d-flex flex-column" *ngIf="!card.isPortrait">
                    <div
                      *ngIf="!flipped"
                      [ngClass]="{
                        'flip-box-inner': true,
                        flip: !card.flipped
                      }"
                    >
                      <div class="flip-box-front">
                        <img
                          alt="Mentor-cards unique cards design for the back of the card"
                          src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                          data-src="{{
                            card.frontImgUrl || card.card.frontImgUrl
                          }}"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards-landscape': selectedCards.length == 1,
                            'two-cards-landscape': selectedCards.length == 2,
                            'three-cards-landscape': selectedCards.length == 3,
                            'four-cards-landscape': selectedCards.length == 4,
                            'five-cards-landscape': selectedCards.length == 5,
                            'rotated-one-cards-landscape':
                              selectedCards.length == 1 && card.rotation !== 0,
                            'rotated-two-cards-landscape':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards-landscape':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards-landscape':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards-landscape':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                      <div class="flip-box-back">
                        <img
                          loading="eager"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards-landscape': selectedCards.length == 1,
                            'two-cards-landscape':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards-landscape':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards-landscape':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards-landscape':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards-landscape':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards-landscape':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards-landscape':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards-landscape':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          src="{{ card.backImgUrl || card.card.backImgUrl }}"
                          data-src="{{
                            card.backImgUrl || card.card.backImgUrl
                          }}"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                    </div>
                    <div
                      *ngIf="flipped"
                      [ngClass]="{
                        'flip-box-inner': true,
                        flip: !card.flipped
                      }"
                    >
                      <div class="flip-box-front">
                        <img
                          alt="Mentor-cards unique cards design for the back of the card"
                          src="{{ card.backImgUrl || card.card.backImgUrl }}"
                          data-src="{{
                            card.backImgUrl || card.card.backImgUrl
                          }}"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards-landscape': selectedCards.length == 1,
                            'two-cards-landscape':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards-landscape':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards-landscape':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards-landscape':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards-landscape':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards-landscape':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards-landscape':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards-landscape':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                      <div class="flip-box-back">
                        <img
                          loading="eager"
                          [ngClass]="{
                            'rotate-0': card.rotation === 0,
                            'rotate-90': card.rotation === 90,
                            'rotate-180': card.rotation === 180,
                            'rotate-270': card.rotation === 270,
                            'img-unselected': !selected,
                            'img-selected': selected,
                            'card-view': true,
                            'one-cards-landscape': selectedCards.length == 1,
                            'two-cards-landscape':
                              selectedCards.length == 2 && card.rotation == 0,
                            'three-cards-landscape':
                              selectedCards.length == 3 && card.rotation == 0,
                            'four-cards-landscape':
                              selectedCards.length == 4 && card.rotation == 0,
                            'five-cards-landscape':
                              selectedCards.length == 5 && card.rotation == 0,
                            'rotated-two-cards-landscape':
                              selectedCards.length == 2 && card.rotation !== 0,
                            'rotated-three-cards-landscape':
                              selectedCards.length == 3 && card.rotation !== 0,
                            'rotated-four-cards-landscape':
                              selectedCards.length == 4 && card.rotation !== 0,
                            'rotated-five-cards-landscape':
                              selectedCards.length == 5 && card.rotation !== 0
                          }"
                          src="{{ card.frontImgUrl }}"
                          data-src="{{ card.frontImgUrl }}"
                          (contextmenu)="onRightClick()"
                          class="p-0"
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <div style="display: flex">
                  <!-- <div>
                    <button
                      (click)="toggleFlipped(card)"
                      style="margin-top: 1vh; margin-right: 70px"
                    >
                      <img
                        src="../../../assets/icons/flip.png"
                        alt="Expand data"
                        width="20px"
                        style="height: 4vh; width: auto; margin-left: 40px"
                      />
                    </button>
                  </div> -->
                  <!-- <div style="margin-right: 2vw">
                  <button (click)="rotateCard(card)" style="margin-top: 1vh">
                    <img
                      src="../../../assets/icons/rotate-right-90.png"
                      alt="Expand data"
                      width="20px"
                      style="height: 4vh; width: auto"
                    />
                  </button>
                </div> -->
                </div>
              </div>
            </div>
          </div>
          <div
            class="dialog-container w-100"
            [class.category-base-dialog]="!categoryScreen"
            style="justify-content: center"
          >
            <div *ngIf="categoryScreen" class="w-100">
              <P style="color: white; text-align: center">{{
                selectedOption
              }}</P>
              <div
                *ngFor="let category of categoryBaseArray"
                class="category-base-container"
              >
                <p style="font-size: 30px; font-weight: bold; color: white">
                  {{ category.categoryName }}
                </p>
                <div class="d-flex category-base-scrollbar">
                  <div
                    *ngFor="let card of category.cards"
                    style="
                      display: flex;
                      flex-direction: column;
                      align-items: center;
                    "
                  >
                    <div
                      class="right-90 d-flex justify-end w-100 align-items-center"
                      style="justify-content: space-around"
                    >
                      <button (click)="toggleFlipped(card)">
                        <img
                          src="../../../assets/icons/flipDoubleSideImg.png"
                          alt="Expand data"
                          width="20px"
                          style="width: auto"
                        />
                      </button>
                      <div
                        class="bg-white rounded-full p-1 text-center w-6 h-6 d-flex justify-center align-items-center"
                      >
                        {{ card.index }}
                      </div>

                      <button
                        class="d-flex justify-end"
                        (click)="rotateCard(card)"
                      >
                        <img
                          src="../../../assets/icons/right-90.svg"
                          alt="Expand data"
                          width="20px"
                          style="height: 40px; width: 40px"
                        />
                      </button>
                    </div>

                    <div *ngIf="selectedCards.length == 1" class="Cross-icon">
                      <button
                        class="btn-close"
                        (click)="toggleChosenCardsModal()"
                      >
                        <img
                          src="../../../assets/icons/Close_round.svg"
                          alt="Expand data"
                          width="20px"
                          style="height: 40px; width: 40px"
                        />
                      </button>
                    </div>
                    <div class="w-100 pl-3">
                      <div class="d-flex flex-column" *ngIf="card.isPortrait">
                        <div
                          *ngIf="!flipped"
                          [ngClass]="{
                            'flip-box-inner': true,
                            flip: !card.flipped
                          }"
                          class="category-base-flip"
                        >
                          <div class="flip-box-front">
                            <img
                              class="p-0 card-image-mobile"
                              alt="Mentor-cards unique cards design for the back of the card"
                              src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              data-src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards': selectedCards.length == 1,
                                'two-cards': selectedCards.length == 2,
                                'three-cards': selectedCards.length == 3,
                                'four-cards': selectedCards.length == 4,
                                'five-cards': selectedCards.length == 5,
                                'rotated-one-cards':
                                  selectedCards.length == 1 &&
                                  card.rotation !== 0,
                                'rotated-two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: '415px', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                            />
                          </div>
                          <div class="flip-box-back">
                            <img
                              class="p-0 card-image-mobile"
                              loading="eager"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards': selectedCards.length == 1,
                                'two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              data-src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              (contextmenu)="onRightClick()"
                              d-flex
                              category-base-scrollbar
                            />
                          </div>
                        </div>
                        <div
                          *ngIf="flipped"
                          [ngClass]="{
                            'flip-box-inner': true,
                            flip: !card.flipped
                          }"
                          class="category-base-flip"
                        >
                          <div class="flip-box-front">
                            <img
                              class="p-0 card-image-mobile"
                              alt="Mentor-cards unique cards design for the back of the card"
                              src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              data-src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards': selectedCards.length == 1,
                                'two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: '376px', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                            />
                          </div>
                          <div class="flip-box-back">
                            <img
                              class="p-0 card-image-mobile"
                              loading="eager"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards': selectedCards.length == 1,
                                'two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              data-src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: 'auto', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                            />
                          </div>
                        </div>
                      </div>

                      <div class="d-flex flex-column" *ngIf="!card.isPortrait">
                        <div
                          *ngIf="!flipped"
                          [ngClass]="{
                            'flip-box-inner': true,
                            flip: !card.flipped
                          }"
                          class="category-base-flip"
                        >
                          <div class="flip-box-front">
                            <img
                              class="p-0 card-image-mobile"
                              alt="Mentor-cards unique cards design for the back of the card"
                              src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              data-src="{{
                                card.frontImgUrl || card.card.frontImgUrl
                              }}"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards-landscape':
                                  selectedCards.length == 1,
                                'two-cards-landscape':
                                  selectedCards.length == 2,
                                'three-cards-landscape':
                                  selectedCards.length == 3,
                                'four-cards-landscape':
                                  selectedCards.length == 4,
                                'five-cards-landscape':
                                  selectedCards.length == 5,
                                'rotated-one-cards-landscape':
                                  selectedCards.length == 1 &&
                                  card.rotation !== 0,
                                'rotated-two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: '376px', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                            />
                          </div>
                          <div class="flip-box-back">
                            <img
                              class="p-0 card-image-mobile"
                              loading="eager"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards-landscape':
                                  selectedCards.length == 1,
                                'two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              data-src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: 'auto', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                              [class.min-width-auto]="!singleCardCheck"
                            />
                          </div>
                        </div>
                        <div
                          *ngIf="flipped"
                          [ngClass]="{
                            'flip-box-inner': true,
                            flip: !card.flipped
                          }"
                          class="category-base-flip"
                        >
                          <div class="flip-box-front">
                            <img
                              class="p-0 card-image-mobile"
                              alt="Mentor-cards unique cards design for the back of the card"
                              src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              data-src="{{
                                card.backImgUrl || card.card.backImgUrl
                              }}"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards-landscape':
                                  selectedCards.length == 1,
                                'two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: '376px', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                              [class.min-width-auto]="!singleCardCheck"
                            />
                          </div>
                          <div class="flip-box-back">
                            <img
                              class="p-0 card-image-mobile"
                              loading="eager"
                              [ngClass]="{
                                'rotate-0': card.rotation === 0,
                                'rotate-90': card.rotation === 90,
                                'rotate-180': card.rotation === 180,
                                'rotate-270': card.rotation === 270,
                                'img-unselected': !selected,
                                'img-selected': selected,
                                'card-view': true,
                                'one-cards-landscape':
                                  selectedCards.length == 1,
                                'two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation == 0,
                                'three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation == 0,
                                'four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation == 0,
                                'five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation == 0,
                                'rotated-two-cards-landscape':
                                  selectedCards.length == 2 &&
                                  card.rotation !== 0,
                                'rotated-three-cards-landscape':
                                  selectedCards.length == 3 &&
                                  card.rotation !== 0,
                                'rotated-four-cards-landscape':
                                  selectedCards.length == 4 &&
                                  card.rotation !== 0,
                                'rotated-five-cards-landscape':
                                  selectedCards.length == 5 &&
                                  card.rotation !== 0
                              }"
                              src="{{ card.frontImgUrl }}"
                              data-src="{{ card.frontImgUrl }}"
                              (contextmenu)="onRightClick()"
                              [ngStyle]="
                                !singleCardCheck
                                  ? { height: 'auto', width: 'auto' }
                                  : { width: '588' }
                              "
                              [class.card-default]="!singleCardCheck"
                              [class.min-width-auto]="!singleCardCheck"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div style="display: flex">
                      <div></div>
                      <!-- <div style="margin-right: 2vw">
                  <button (click)="rotateCard(card)" style="margin-top: 1vh">
                    <img
                      src="../../../assets/icons/rotate-right-90.png"
                      alt="Expand data"
                      width="20px"
                      style="height: 4vh; width: auto"
                    />
                  </button>
                </div> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div
            *ngIf="categoryScreen || singleCategoryBaseCard"
            class="download-btn category-base-download"
          >
            <button
              class="d-flex gap-2 download-button"
              (click)="downloadAllImages()"
            >
              <img src="../../../assets/icons/download-bottom.svg" />שמירת פריסה
              כתמונה
            </button>
          </div> -->
        </ng-container>
        <div
          *ngIf="!isDoubleSided"
          class="multi-card-mobile multi-card-without-cat"
        >
          <div class="Cross-icon">
            <button class="btn-close" (click)="toggleChosenCardsModal()">
              <img
                src="../../../assets/icons/Close_round.svg"
                alt="Expand data"
                width="20px"
                style="height: 40px; width: 40px"
              />
            </button>
          </div>
          <p class="drop-down">{{ this.selectedOption }}</p>
          <div [class.single-side-card]="selectedCards.length > 1">
            <div
              [class.single-card]="selectedCards.length == 1"
              *ngFor="let card of selectedCards"
              style="display: block"
            >
              <div
                *ngIf="!card.isPortrait"
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                "
              >
                <!-- [class.zarori]="!singleCardCheck" -->
                <div
                  class="right-90 d-flex justify-end w-100 align-items-center"
                >
                  <div class="width-70">
                    <div
                      class="bg-white rounded-full p-1 text-center w-6 h-6 d-flex justify-center align-items-center"
                    >
                      {{ card.index }}
                    </div>
                  </div>

                  <button
                    class="d-flex justify-end right-90-icon width-30"
                    (click)="rotateCard(card)"
                    style="margin-top: 1vh; width: 45%"
                  >
                    <img
                      class="Icon-90"
                      src="../../../assets/icons/right-90.svg"
                      alt="Expand data"
                    />
                  </button>
                </div>

                <div
                  style="width: 100%; height: 400px; overflow: hidden"
                  ngClass="{
                  'rotate-0': card.rotation === 0,
                  'rotate-90': card.rotation === 90,
                  'rotate-180': card.rotation === 180,
                  'rotate-270': card.rotation === 270,
                }"
                >
                  <img
                    (click)="imgClick($event)"
                    alt="one of the selected cards shown"
                    loading="eager"
                    src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                    data-src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                    class="width-fixed m-0 p-0 card-image-mobile"
                    [ngStyle]="
                      !singleCardCheck
                        ? { height: '400px', width: 'auto' }
                        : { width: '588' }
                    "
                    [class.card-default]="!singleCardCheck"
                    class="p-0 card-image-mobile"
                    style="width: 100%; height: 400px; object-fit: cover"
                  />
                </div>

                <div
                  *ngIf="card.isPortrait"
                  style="
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                  "
                >
                  <img
                    class="p-0 card-image-mobile"
                    (click)="imgClick($event)"
                    alt="one of the selected cards shown"
                    [ngClass]="{
                      'rotate-0': card.rotation === 0,
                      'rotate-90': card.rotation === 90,
                      'rotate-180': card.rotation === 180,
                      'rotate-270': card.rotation === 270,
                      'card-view': true,
                      'one-cards': selectedCards.length == 1,
                      'three-cards': selectedCards.length == 3,
                      'four-cards': selectedCards.length == 4,
                      'five-cards': selectedCards.length == 5
                    }"
                    loading="eager"
                    src="{{ card.frontImgUrl || card.card.frontImgUrl }}"
                    data-src="{{ card.frontImgUrl }}"
                  />

                  <div>
                    <button
                      class="d-flex justify-end"
                      (click)="rotateCard(card)"
                      style="margin-top: 1vh; width: 45%"
                    >
                      <img
                        src="../../../assets/icons/right-90.svg"
                        alt="Expand data"
                        width="20px"
                        style="height: 40px; width: 40px; margin-left: 35px"
                      />
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div
            class="download-btn"
            style="display: flex; justify-content: space-around"
          >
            <button
              class="d-flex gap-2 download-button"
              (click)="downloadAllImages()"
            >
              <img src="../../../assets/icons/download-bottom.svg" />שמירת פריסה
              כתמונה
            </button>
          </div> -->
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="showRandomCards" class="selected-cards-modal">
    <div class="selected-cards-modal-content">
      <button
        class="iconButton close-cards-view"
        mat-icon-button
        (click)="toggleRandomCardsModal()"
      >
        <mat-icon class="mat-icon-close-random">highlight_off</mat-icon>
      </button>
      <div class="random-content" style="height: 80%">
        <button
          class="btn btn-light"
          [disabled]="randomCardIndex == cards[0]?.cardsImages.length - 1"
          (click)="changeRandomCard(1)"
        >
          <mat-icon class="btn-icon mat-icon-arrow">chevron_right</mat-icon>
        </button>
        <img
          class="card-view"
          style="height: 69vh"
          loading="eager"
          src="{{ cards[0]?.cardsImages[randomCardIndex].frontImgUrl }}"
          data-src="{{ cards[0]?.cardsImages[randomCardIndex].frontImgUrl }}"
          alt="Random card from the pack"
        />
        <button
          class="btn btn-light"
          [disabled]="randomCardIndex == 0"
          (click)="changeRandomCard(-1)"
        >
          <mat-icon class="btn-icon mat-icon-arrow">chevron_left</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- TODO -->
<footer
  class="footer"
  *ngIf="(multiSelectCard.length > 0 || selectedOption) && id != '90'"
  [ngStyle]="{ display: showEditPack ? 'none' : 'flex' }"
>
  <div class="footer-container">
    <!-- <div class="w-100" *ngIf="multiSelectCard.length > 0">
      <img src="../../../assets/icons/black_cross.png" />
    </div> -->
    <span
      class="selected-option"
      *ngIf="multiSelectCard.length === 0 && selectedOption"
      >{{ selectedOption }}</span
    >
    <div class="card-box">
      <div *ngIf="multiSelectCard.length > 0" class="button-box hideItMobile">
        <button class="show-all" (click)="showAllInDialog()">
          <img src="../../../assets/icons/zoomPlus.png" />
          הצגת הקלפים שבחרתם
        </button>
        <button class="remove-all" (click)="multiSelectCard = []">
          <img src="../../../assets/icons/undo.png" />
          איפוס בחירה
        </button>
      </div>

      <div
        *ngIf="multiSelectCard.length && !isEditing"
        class="button-box-mbl hideItDesktop"
      >
        <button class="show-all-mbl" (click)="showAllInDialog()">
          <img
            src="../../../assets/icons/zoomPlus.png"
            style="width: 13px; height: 13px"
          />
          הצגת הקלפים
        </button>

        <button class="remove-all-mbl" (click)="multiSelectCard = []">
          <img
            src="../../../assets/icons/undo.png"
            style="width: 11px; height: 11px"
          />
          איפוס
        </button>
      </div>
      <div class="multi-card-container d-flex" [class.pb-6]="true">
        <ng-container *ngFor="let item of sortedCards; let i = index">
          <!-- Display category name only if it's the first card of its category -->
          <div class="category-title">
            <!-- <p>{{ category.categoryName }}</p> -->
            <p
              *ngIf="isFirstCardOfCategory(item, i)"
              style="margin-bottom: 0px"
            >
              {{ item?.category }}
            </p>
          </div>
          <div
            class="position-relative"
            [class.img-box]="!item?.category"
            [class.category-img-box]="item?.category"
          >
            <span
              *ngIf="item.index"
              class="bg-white rounded-full p-1 text-center w-6 h-6"
              style="margin-left: 33px"
              >{{ item?.index }}</span
            >
            <img
              class="position-absolute bg-white rounded-full p-1"
              style="left: 8px; top: 25px"
              src="../../../assets/icons/zoomPlus.png"
              width="25px"
              height="25px"
              (click)="cardSelected(item.card, item.index, true)"
            />
            <img
              *ngIf="item.card.backImgUrl && !flipped"
              class="img-box"
              alt="Mentor-cards unique cards design for the back of the card"
              [src]="item?.card.backImgUrl"
              data-src="{{ cardContent?.backImgUrl }}"
            />
            <img
              *ngIf="
                (item.card.frontImgUrl && flipped) || !item.card.backImgUrl
              "
              class="img-box"
              alt="Mentor-cards unique cards design for the front of the card"
              [src]="item?.card.frontImgUrl"
              data-src="{{ cardContent?.frontImgUrl }}"
            />
            <img
              src="../../../assets/icons/black_cross.png"
              class="absolute bg-white rounded-full p-1"
              style="top: 25px; right: 12px"
              width="25px"
              height="25px"
              (click)="removeImage(item)"
            />
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</footer>

<footer
  class="footer"
  *ngIf="(multiSelectCard.length > 0 || selectedOption) && id === '90'"
>
  <div class="footer-container">
    <div class="w-100" *ngIf="multiSelectCard.length > 0">
      <!-- <img src="../../../assets/icons/black_cross.png" /> -->
    </div>
    <span
      class="selected-option"
      *ngIf="
        multiSelectCard.length === 0 &&
        categoryBaseArray.length === 0 &&
        selectedOption
      "
      >{{ selectedOption }}</span
    >
    <div class="card-box">
      <div
        *ngIf="multiSelectCard.length > 0 || categoryBaseArray.length > 0"
        class="button-box hideItMobile"
      >
        <button class="show-all" (click)="showAllInDialog()">
          <img src="../../../assets/icons/zoomPlus.png" />
          הצגת הקלפים שבחרתם
        </button>
        <button class="remove-all" (click)="resetCategoryFooter()">
          <img src="../../../assets/icons/undo.png" />
          איפוס בחירה
        </button>
      </div>

      <div
        *ngIf="multiSelectCard.length > 0"
        class="button-box-mbl hideItDesktop"
      >
        <button class="show-all-mbl" (click)="showAllInDialog()">
          <img
            src="../../../assets/icons/zoomPlus.png"
            style="width: 13px; height: 13px"
          />
          הצגת הקלפים
        </button>

        <button class="remove-all-mbl" (click)="resetCategoryFooter()">
          <img
            src="../../../assets/icons/undo.png"
            style="width: 11px; height: 11px"
          />
          איפוס
        </button>
      </div>

      <div class="multi-card-container d-flex mb-6">
        <div class="w-100 category-base-footer">
          <div *ngFor="let category of categoryBaseArray">
            <p
              class="category-location"
              style="font-size: 15px; font-weight: bold; color: rgb(0, 0, 0)"
            >
              {{ category.categoryName }}
            </p>
            <div class="category-base-card-container">
              <div
                *ngFor="let card of category.cards"
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                "
              >
                <div
                  class="position-relative"
                  [class.img-box]="!card?.category"
                  [class.category-img-box]="card?.category"
                >
                  <span
                    *ngIf="card.index"
                    class="bg-white rounded-full p-1 text-center w-6 h-6"
                    style="margin-left: 33px"
                    >{{ card?.index }}</span
                  >
                  <img
                    class="position-absolute"
                    style="left: 8px; top: 25px"
                    src="../../../assets/icons/zoomPlus.png"
                    (click)="
                      categoryBaseCardSelected(card, card.index, true, true)
                    "
                  />
                  <img
                    [class.height-82]="card?.category"
                    class="img-box"
                    *ngIf="!card?.backImgUrl"
                    alt="Mentor-cards unique cards design for the back of the card"
                    src="/assets/Mentor-Cards-Back.png"
                  />
                  <img
                    *ngIf="card.backImgUrl && !flipped"
                    class="img-box"
                    alt="Mentor-cards unique cards design for the back of the card"
                    [src]="card?.backImgUrl"
                    data-src="{{ card?.backImgUrl }}"
                  />
                  <img
                    *ngIf="card.frontImgUrl && flipped"
                    class="img-box"
                    alt="Mentor-cards unique cards design for the frontImgUrl of the card"
                    [src]="card?.frontImgUrl"
                    data-src="{{ card?.frontImgUrl }}"
                  />
                  <img
                    *ngIf="!card.backImgUrl"
                    class="img-box"
                    alt="Mentor-cards unique cards design for the frontImgUrl of the card"
                    [src]="card?.frontImgUrl"
                    data-src="{{ card?.frontImgUrl }}"
                  />
                  <img
                    src="../../../assets/icons/black_cross.png"
                    class="absolute"
                    style="top: 25px; right: 12px"
                    (click)="
                      removeCategoryBaseImage(card.index, category.categoryName)
                    "
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
